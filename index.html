<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>#AFILIADOS MERCADO LIVRE - MARANHÃƒO</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
/* Estilos Gerais e Reset */
* { box-sizing: border-box; font-family: 'Inter', sans-serif; }
body { margin:0; background:#fefce8; color:#1f2937; padding:20px; }

/* Barra de Data e Hora Neon */
#barraHora {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  padding: 10px 0;
  background: #000;
  text-align: center;
  font-size: 1.2rem;
  font-weight: bold;
  color: #ffff00;
  text-shadow: 0 0 5px #ffff00, 0 0 10px #00f, 0 0 20px #00f, 0 0 30px #ffff00;
  z-index: 999;
  animation: neonGlow 1.5s ease-in-out infinite alternate;
}

@keyframes neonGlow {
  0% { text-shadow: 0 0 5px #ffff00, 0 0 10px #00f, 0 0 20px #00f, 0 0 30px #ffff00; }
  50% { text-shadow: 0 0 10px #ffff00, 0 0 15px #00f, 0 0 25px #00f, 0 0 35px #ffff00; }
  100% { text-shadow: 0 0 5px #ffff00, 0 0 10px #00f, 0 0 20px #00f, 0 0 30px #ffff00; }
}

/* CabeÃ§alho */
header { text-align:center; margin:50px 0 30px 0; }
header img { max-width:100%; height:auto; margin-bottom:10px; border-radius:10px; }
header h1 { font-size:1.8rem; color:#1e3a8a; margin:0; font-weight:700; }
header p { color:#374151; margin:5px 0 0; }

/* Card Principal */
.card { max-width:700px; margin:0 auto; background:#fff; border-radius:16px; padding:24px; box-shadow:0 10px 20px rgba(0,0,0,0.1); }
.input-group { margin-bottom:8px; } 

input { 
    width:100%; padding:14px; border:1px solid #d1d5db; border-radius:8px; font-size:1rem; 
    transition: border-color 0.3s;
}
input:focus { border-color: #facc15; outline: none; }

/* BotÃµes */
.btn-group { display:flex; flex-wrap:wrap; gap:10px; margin-top:12px; }
button { 
    background-color:#facc15; color:#000; padding:12px 20px; font-size:1rem; 
    border:none; border-radius:8px; cursor:pointer; font-weight:600; 
    transition:background 0.3s, transform 0.1s; flex:1 1 150px; 
}
button:hover { background-color:#eab308; }
button:active { transform: scale(0.98); }
.btn-limpar { background-color:#d946ef !important; color:white !important; }
.btn-limpar:hover { background-color:#c026d3 !important; }

/* Resultado/SugestÃ£o */
.result { 
    background:#f3f4f6; margin-top:20px; padding:16px; border-radius:10px; 
    white-space:pre-line; border-left:5px solid #1e3a8a; 
    opacity:0; transform:translateY(20px); 
    transition: opacity 0.5s ease, transform 0.5s ease;
    word-break: break-word; 
}
.result.show { opacity:1; transform:translateY(0); }

/* Caixa de aviso */
#caixaAviso {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: #ffffff;
  width: 90%;
  max-width: 350px;
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 0 20px rgba(0,0,0,0.25);
  z-index: 10000;
  display: none;
  animation: fadeIn 0.4s ease;
}

#caixaAviso h2 {
  margin-top: 0;
  font-size: 1.3rem;
  color: #1e3a8a;
}

#caixaAviso input {
  width: 100%;
  padding: 12px;
  margin-top: 10px;
  border-radius: 8px;
  border: 1px solid #ccc;
}

#fecharAviso {
  position: absolute;
  top: 10px;
  right: 14px;
  cursor: pointer;
  font-size: 20px;
  color: #555;
}

#botaoSalvarNome {
  margin-top: 12px;
  width: 100%;
  padding: 12px;
  background: #facc15;
  border: none;
  font-weight: bold;
  border-radius: 8px;
  cursor: pointer;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translate(-50%, -55%); }
  to   { opacity: 1; transform: translate(-50%, -50%); }
}

/* Media Queries */
@media (max-width:480px){
  header h1{font-size:1.5rem;}
  input{font-size:0.95rem; padding:12px;}
  .btn-group{flex-direction:column; gap:8px;}
  button{width:100%; flex:none;}
}
</style>
</head>
<body>

<div id="barraHora"></div>

<!-- CAIXA DE AVISO -->
<div id="caixaAviso">
  <span id="fecharAviso">âœ–</span>
  <h2>Bem-vindo!</h2>
  <p>Qual Ã© o seu nome?</p>
  <input type="text" id="nomeUsuario" placeholder="Digite seu nome">
  <button id="botaoSalvarNome">Salvar</button>
</div>

<header>
  <img src="img/1712155869572-desktophome-mainslider.webp" alt="Logo Mercado Livre">
  <h1>Natal e Ano Novo 2025  #BORA #FAZER $$$</h1>
  <p>DivulgaÃ§Ã£o inteligente dos seus links de afiliado</p>
</header>

<div class="card">
  <div class="input-group"><input type="text" id="tituloProduto" placeholder="TÃ­tulo do Produto"></div>
  <div class="input-group"><input type="text" id="linkAfiliado" placeholder="Link de afiliado do Mercado Livre"></div>
  <div class="input-group"><input type="text" id="idProduto" placeholder="ID do produto (ex: MLB123456789)"></div>
  <div class="input-group"><input type="text" id="cupomDesconto" placeholder="Cupom de desconto (opcional)"></div>
  <div class="input-group"><input type="number" id="precoAtual" placeholder="PreÃ§o atual (ex: 1899.90)"></div>
  <div class="input-group"><input type="number" id="precoAnterior" placeholder="PreÃ§o anterior (opcional)"></div>

  <div class="btn-group">
    <button onclick="gerarTexto()">ðŸš€ Gerar texto</button>
    <button onclick="copiarTexto()">ðŸ“‹ Copiar texto</button>
    <button onclick="compartilharWhatsApp()">ðŸ’¬ WhatsApp</button>
    <button onclick="limparFormulario()" class="btn-limpar">ðŸ§¹ Limpar</button>
  </div>

  <div id="sugestao" class="result" style="display:none;"></div>
</div>

<script>
// Atualiza hora e data a cada segundo
function atualizarHora() {
  const barra = document.getElementById('barraHora');
  const agora = new Date();
  const dia = String(agora.getDate()).padStart(2,'0');
  const mes = String(agora.getMonth()+1).padStart(2,'0');
  const ano = agora.getFullYear();
  const horas = String(agora.getHours()).padStart(2,'0');
  const minutos = String(agora.getMinutes()).padStart(2,'0');
  const segundos = String(agora.getSeconds()).padStart(2,'0');
  barra.textContent = `ðŸ•’ ${dia}/${mes}/${ano} - ${horas}:${minutos}:${segundos}`;
}
setInterval(atualizarHora,1000);
atualizarHora();

/* ----------- SISTEMA DE NOME + SAUDAÃ‡ÃƒO ----------- */

function obterSaudacao() {
  const hora = new Date().getHours();
  if (hora < 12) return "Bom dia";
  if (hora < 18) return "Boa tarde";
  return "Boa noite";
}

function iniciarAviso() {
  const nomeSalvo = localStorage.getItem("nomeVisitante");
  const caixa = document.getElementById("caixaAviso");

  if (!nomeSalvo) {
    caixa.style.display = "block";
  } else {
    const saudacao = obterSaudacao();
    alert(`${saudacao}, ${nomeSalvo}!`);
  }
}

document.getElementById("botaoSalvarNome").addEventListener("click", () => {
  const nome = document.getElementById("nomeUsuario").value.trim();
  if (nome.length < 2) {
    alert("Digite um nome vÃ¡lido.");
    return;
  }
  localStorage.setItem("nomeVisitante", nome);
  document.getElementById("caixaAviso").style.display = "none";

  const saudacao = obterSaudacao();
  alert(`${saudacao}, ${nome}!`);
});

document.getElementById("fecharAviso").addEventListener("click", () => {
  document.getElementById("caixaAviso").style.display = "none";
});

window.onload = iniciarAviso;

/* ----------- RESTANTE DO SEU SCRIPT ----------- */

function gerarTexto() {
  const titulo = document.getElementById('tituloProduto').value.trim();
  const link = document.getElementById('linkAfiliado').value.trim();
  const idProduto = document.getElementById('idProduto').value.trim().toUpperCase();
  const cupom = document.getElementById('cupomDesconto').value.trim();
  const precoAtual = parseFloat(document.getElementById('precoAtual').value);
  const precoAnterior = parseFloat(document.getElementById('precoAnterior').value);
  const sugestao = document.getElementById('sugestao');

  if(!titulo || !link || !idProduto){ alert('Preencha o tÃ­tulo, link e ID.'); return; }

  let textoHTML = `*${titulo}*\n\n`;

  if(cupom){ 
    textoHTML += `ðŸŽŸï¸ Cupom: *${cupom}*\nðŸŸ¢ Aproveita esse cupom, ele acabarÃ¡ rÃ¡pido!\n\n`; 
  } else { 
    textoHTML += `ðŸŸ¡ No momento nÃ£o tem cupom.\n\n`; 
  }

  if(!isNaN(precoAtual) && precoAtual>0){
    textoHTML += `ðŸ’° *PreÃ§o atual:* R$ ${precoAtual.toFixed(2).replace('.',',')}\n`;
    
    if(!isNaN(precoAnterior) && precoAnterior>precoAtual){
      const economia = precoAnterior - precoAtual;
      const descontoPercentual = (economia/precoAnterior)*100;
      textoHTML += `ðŸ“‰ *PreÃ§o anterior:* R$ ${precoAnterior.toFixed(2).replace('.',',')}\n`;
      textoHTML += `ðŸ”¥ *Economia:* R$ ${economia.toFixed(2).replace('.',',')} (${descontoPercentual.toFixed(2)}%)\n`;
    }
  }

  textoHTML += `\nðŸ‘‰ Link do produto: ${link}\n\nAproveite agora! ðŸš€`;

  sugestao.style.display='block';
  sugestao.innerHTML = textoHTML;
  setTimeout(()=>{ sugestao.classList.add('show'); },50);
}

function copiarTexto() { 
  const texto = document.getElementById('sugestao').textContent; 
  navigator.clipboard.writeText(texto); 
  alert('Texto copiado!'); 
}

function compartilharWhatsApp() { 
  const texto = document.getElementById('sugestao').textContent; 
  window.open(`https://wa.me/?text=${encodeURIComponent(texto)}`,'_blank'); 
}

function limparFormulario() { 
  document.getElementById('tituloProduto').value=''; 
  document.getElementById('linkAfiliado').value=''; 
  document.getElementById('idProduto').value=''; 
  document.getElementById('cupomDesconto').value=''; 
  document.getElementById('precoAtual').value=''; 
  document.getElementById('precoAnterior').value=''; 
  document.getElementById('sugestao').classList.remove('show'); 
  setTimeout(()=>{document.getElementById('sugestao').style.display='none';},500); 
}

document.getElementById('linkAfiliado').addEventListener('blur',function(){
  const link=this.value; 
  let idExtraido = link.match(/MLB\d{9}/i); 
  if(!idExtraido){ idExtraido = link.match(/\d{10}/); }
  if(idExtraido){ 
    const finalId = idExtraido[0].startsWith('MLB') ? idExtraido[0].toUpperCase() : 'MLB'+idExtraido[0]; 
    document.getElementById('idProduto').value=finalId; 
  }
});
</script>

</body>
</html>
