<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>#AFILIADOS MERCADO LIVRE - MARANHÃƒO</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
/* Estilos Gerais e Reset */
* { box-sizing: border-box; font-family: 'Inter', sans-serif; }
body { margin:0; background:#fefce8; color:#1f2937; padding:20px; }
a { text-decoration: none; color: inherit; }

/* CabeÃ§alho */
header { text-align:center; margin-bottom:30px; }
header img { max-width:100%; height:auto; margin-bottom:10px; border-radius:10px; }
header h1 { font-size:1.8rem; color:#1e3a8a; margin:0; font-weight:700; }
header p { color:#374151; margin:5px 0 0; }

/* Card Principal */
.card { max-width:700px; margin:0 auto; background:#fff; border-radius:16px; padding:24px; box-shadow:0 10px 20px rgba(0,0,0,0.1); }
/* --- CORREÃ‡ÃƒO AQUI: Margem reduzida de 16px para 8px --- */
.input-group { margin-bottom:8px; } 

input { 
    width:100%; padding:14px; border:1px solid #d1d5db; border-radius:8px; font-size:1rem; 
    transition: border-color 0.3s;
}
input:focus { border-color: #facc15; outline: none; }

/* BotÃµes */
.btn-group { display:flex; flex-wrap:wrap; gap:10px; margin-top:12px; }
button { 
    background-color:#facc15; color:#000; padding:12px 20px; font-size:1rem; 
    border:none; border-radius:8px; cursor:pointer; font-weight:600; 
    transition:background 0.3s, transform 0.1s; flex:1 1 150px; 
}
button:hover { background-color:#eab308; }
button:active { transform: scale(0.98); }
.btn-limpar { background-color:#d946ef !important; color:white !important; }
.btn-limpar:hover { background-color:#c026d3 !important; }

/* Resultado/SugestÃ£o */
.result { 
    background:#f3f4f6; margin-top:20px; padding:16px; border-radius:10px; 
    white-space:pre-line; border-left:5px solid #1e3a8a; 
    opacity:0; transform:translateY(20px); 
    transition: opacity 0.5s ease, transform 0.5s ease;
    word-break: break-word; 
}
.result.show { opacity:1; transform:translateY(0); }

/* Destaque de PreÃ§os/Desconto */
.preco-atual { color:#16a34a; font-weight:700; }
.preco-anterior { color:#dc2626; font-weight:700; text-decoration:line-through; }
.desconto { color:#f97316; font-weight:700; }

/* Mini Preview */
.mini-preview { 
    display:flex; align-items:center; gap:12px; margin-bottom:12px; 
    border-bottom:1px dashed #ccc; padding-bottom:12px; text-decoration:none; 
    color:inherit; 
    opacity:1; transform:translateY(0);
}
.mini-preview-title { font-weight:700; color:#1e3a8a; flex:1; word-wrap:break-word; }

/* Lista de Produtos Recentes */
.produtos { margin-top:30px; background:#fff; border-radius:12px; padding:20px; box-shadow:0 6px 15px rgba(0,0,0,0.05); }
.produtos h3 { margin-bottom:12px; color:#1e3a8a; }
.contador-produtos { font-size:1.1rem; color:#374151; margin-bottom:10px; font-weight:700; display:flex; align-items:center; gap:5px; }

/* AnimaÃ§Ã£o Flip Number */
.flip-number { display:inline-block; width:20px; height:28px; perspective:400px; }
.flip-number-inner { display:block; width:100%; height:100%; background:#e5e7eb; color:#1f2937; text-align:center; border-radius:4px; transform-style:preserve-3d; transition: transform 0.6s ease-in-out; line-height:28px; font-weight:700; }
.flip-number-front, .flip-number-back { position:absolute; width:100%; height:100%; backface-visibility:hidden; top:0; left:0; }
.flip-number-back { transform:rotateX(180deg); }

/* Item na Lista de Produtos */
.produto-item { 
    display:flex; align-items:center; gap:15px; border-bottom:1px dashed #ccc; 
    padding-bottom:12px; margin-bottom:12px; flex-wrap:nowrap; 
    opacity:0; transform:translateY(20px); 
    transition: opacity 0.5s ease, transform 0.5s ease;
}
.produto-item.show { opacity:1; transform:translateY(0); }
.produto-item img { width:80px; height:80px; object-fit:cover; border-radius:8px; border:1px solid #ddd; flex-shrink: 0; }
.produto-info { flex:1; min-width:200px; word-break: break-word; }

/* Media Queries para Responsividade */
@media (max-width:480px){
Â  header h1{font-size:1.5rem;}
Â  input{font-size:0.95rem; padding:12px;}
Â  .btn-group{flex-direction:column; gap:8px;}
Â  button{width:100%; flex:none;}
Â  .produto-item, .mini-preview { flex-direction:column; align-items:flex-start; }
Â  .produto-item img, .mini-preview img { width:100%; height:auto; }
Â  .produto-info, .mini-preview-title { width:100%; min-width:auto; }
}
</style>
</head>
<body>
<header>
Â  <img src="img/1712155869572-desktophome-mainslider.webp" alt="Logo Mercado Livre">
Â  <h1>GRUPO - AFILIADOS MERCADO LIVRE - MARANHÃƒO</h1>
Â  <p>DivulgaÃ§Ã£o inteligente dos seus links de afiliado</p>
</header>

<div class="card">
Â  <div class="input-group"><input type="text" id="tituloProduto" placeholder="TÃ­tulo do Produto"></div>
Â  <div class="input-group"><input type="text" id="linkAfiliado" placeholder="Link de afiliado do Mercado Livre"></div>
Â  <div class="input-group"><input type="text" id="idProduto" placeholder="ID do produto (ex: MLB123456789)"></div>
Â  <div class="input-group"><input type="text" id="cupomDesconto" placeholder="Cupom de desconto (opcional)"></div>
Â  <div class="input-group"><input type="number" id="precoAtual" placeholder="PreÃ§o atual (ex: 1899.90)"></div>
Â  <div class="input-group"><input type="number" id="precoAnterior" placeholder="PreÃ§o anterior (opcional)"></div>

Â  <div class="btn-group">
Â  Â  <button onclick="gerarTexto()">ðŸš€ Gerar texto</button>
Â  Â  <button onclick="copiarTexto()">ðŸ“‹ Copiar texto</button>
Â  Â  <button onclick="compartilharWhatsApp()">ðŸ’¬ WhatsApp</button>
    <button onclick="limparFormulario()" class="btn-limpar">ðŸ§¹ Limpar</button>
Â  </div>

Â  <div id="sugestao" class="result" style="display:none;"></div>
</div>

<div class="produtos" id="produtosLista" style="display:none;">
Â  <div class="contador-produtos" id="contadorProdutos">Ãšltimos produtos: <span id="flipContainer"></span></div>
Â  <div id="listaProdutos"></div>
</div>

<script>
function gerarTexto() {
Â  const titulo = document.getElementById('tituloProduto').value.trim();
Â  const link = document.getElementById('linkAfiliado').value.trim();
Â  const idProduto = document.getElementById('idProduto').value.trim().toUpperCase();
Â  const cupom = document.getElementById('cupomDesconto').value.trim();
Â  const precoAtual = parseFloat(document.getElementById('precoAtual').value);
Â  const precoAnterior = parseFloat(document.getElementById('precoAnterior').value);
Â  const sugestao = document.getElementById('sugestao');

Â  if(!titulo || !link || !idProduto){ alert('Preencha o tÃ­tulo, link e ID do produto.'); return; }

Â  const imagem = `https://http2.mlstatic.com/D_NQ_NP_${idProduto}-O.webp`; 

Â  let textoHTML = '';

    // 1. TÃ­tulo do Produto (Usado como <strong> para o WhatsApp e para o texto de cÃ³pia)
Â  textoHTML += `<strong>${titulo}</strong>\n\n`; 
    
    // 2. Mini Preview (Elemento visual na tela, mas serÃ¡ ignorado na cÃ³pia)
Â  textoHTML += `<a href="${link}" target="_blank" class="mini-preview"><img src="${imagem}" alt="${titulo}"><div class="mini-preview-title">${titulo}</div></a>\n`; 

Â  // 3. Cupom (fica abaixo do tÃ­tulo/preview)
Â  if(cupom){ 
Â  Â  textoHTML += `ðŸŽŸï¸ Cupom: *${cupom}*\nðŸŸ¢ Aproveita esse cupom, ele acabarÃ¡ rÃ¡pido!\n\n`; 
Â  }
Â  else{ 
Â  Â  textoHTML += `ðŸŸ¡ No momento nÃ£o tem cupom.\n\n`; 
Â  }
Â  
Â  // 4. PreÃ§os e Economia
Â  if(!isNaN(precoAtual) && precoAtual>0){
Â  Â  textoHTML += `ðŸ’° *PreÃ§o atual:* <span class="preco-atual">R$ ${precoAtual.toFixed(2).replace('.',',')}</span>\n`;
Â  Â  if(!isNaN(precoAnterior) && precoAnterior>precoAtual){
Â  Â  Â  const economia = precoAnterior - precoAtual;
Â  Â  Â  const descontoPercentual = (economia/precoAnterior)*100;
Â  Â  Â  textoHTML += `ðŸ“‰ *PreÃ§o anterior:* <span class="preco-anterior">R$ ${precoAnterior.toFixed(2).replace('.',',')}</span>\n`;
Â  Â  Â  textoHTML += `ðŸ”¥ *Economia:* <span class="desconto">R$ ${economia.toFixed(2).replace('.',',')} (${descontoPercentual.toFixed(2)}% de desconto)</span>\n`;
Â  Â  }
Â  }
Â  textoHTML += `\nðŸ‘‰ Link do produto: ${link}\n\nAproveite agora! ðŸš€`;

Â  sugestao.style.display='block';
Â  sugestao.innerHTML = textoHTML;

Â  // Aplica a animaÃ§Ã£o no bloco de resultado
Â  setTimeout(()=>{ sugestao.classList.add('show'); },50);

Â  salvarProduto(titulo, link, imagem);
}

function copiarTexto(){
Â  const temp = document.createElement("div");
Â  
Â  let htmlContent = document.getElementById('sugestao').innerHTML;
  
Â  // Remove a primeira linha com o tÃ­tulo (que agora estÃ¡ envolvido em <strong>)
Â  htmlContent = htmlContent.replace(/<strong>(.*?)<\/strong>\n\n/, '*$1*\n\n'); 
  
  // Remove o bloco do mini-preview completamente na hora de copiar, pois ele contÃ©m o link visual
  htmlContent = htmlContent.replace(/<a href=".*?" target="_blank" class="mini-preview">.*?<\/a>\n/, '');
  
Â  temp.innerHTML = htmlContent.replace(/<[^>]+>/g,'');
Â  const textoPuro = temp.textContent.trim(); 
Â  
Â  navigator.clipboard.writeText(textoPuro).then(()=>{ 
Â  Â  alert('Texto copiado com sucesso! VocÃª pode colÃ¡-lo onde quiser.'); 
Â  }).catch(err => {
Â  Â  console.error('Falha ao copiar texto: ', err);
Â  Â  alert('NÃ£o foi possÃ­vel copiar o texto automaticamente. Por favor, copie-o manualmente do quadro de sugestÃ£o.');
Â  });
}

function compartilharWhatsApp(){
Â  const temp = document.createElement("div");
Â  
  let htmlContent = document.getElementById('sugestao').innerHTML;
  
  // Remove a primeira linha com o tÃ­tulo (que agora estÃ¡ envolvido em <strong>)
Â  htmlContent = htmlContent.replace(/<strong>(.*?)<\/strong>\n\n/, '*$1*\n\n'); 
  
  // Remove o bloco do mini-preview completamente na hora de copiar
  htmlContent = htmlContent.replace(/<a href=".*?" target="_blank" class="mini-preview">.*?<\/a>\n/, '');

Â  temp.innerHTML = htmlContent.replace(/<[^>]+>/g,'');
Â  const texto = temp.textContent.trim();
Â  
Â  window.open(`https://wa.me/?text=${encodeURIComponent(texto)}`,'_blank');
}

function limparFormulario() {
Â  document.getElementById('tituloProduto').value = '';
Â  document.getElementById('linkAfiliado').value = '';
Â  document.getElementById('idProduto').value = '';
Â  document.getElementById('cupomDesconto').value = '';
Â  document.getElementById('precoAtual').value = '';
Â  document.getElementById('precoAnterior').value = '';
Â  
Â  const sugestao = document.getElementById('sugestao');
Â  sugestao.classList.remove('show');
Â  setTimeout(() => { sugestao.style.display = 'none'; }, 500);
}

function salvarProduto(titulo, link, imagem){
Â  const produtos = JSON.parse(localStorage.getItem('produtos')) || [];
Â  produtos.unshift({titulo,link,imagem});
Â  localStorage.setItem('produtos', JSON.stringify(produtos.slice(0,5)));
Â  mostrarProdutos();
}

function criarFlipNumber(container, target){
Â  container.innerHTML = '';
Â  const digits = target.toString().split('');
Â  digits.forEach((d,i)=>{
Â  Â  const span = document.createElement('span');
Â  Â  span.className='flip-number';
Â  Â  span.innerHTML = `<span class="flip-number-inner"><span class="flip-number-front">0</span><span class="flip-number-back">${d}</span></span>`;
Â  Â  container.appendChild(span);
Â  Â  setTimeout(()=>{Â 
Â  Â  Â  span.querySelector('.flip-number-inner').style.transform='rotateX(-180deg)';Â 
Â  Â  }, i*200);
Â  });
}

function mostrarProdutos(){
Â  const produtos = JSON.parse(localStorage.getItem('produtos')) || [];
Â  const lista = document.getElementById('listaProdutos');
Â  const box = document.getElementById('produtosLista');
Â  const flipContainer = document.getElementById('flipContainer');
Â  if(!produtos.length){ box.style.display='none'; return; }

Â  criarFlipNumber(flipContainer, produtos.length);

Â  lista.innerHTML='';
Â  produtos.forEach((p,index)=>{
Â  Â  const item=document.createElement('div');
Â  Â  item.className='produto-item';
Â  Â  const img=document.createElement('img');
Â  Â  img.src=p.imagem||'https://via.placeholder.com/80?text=Produto';
Â  Â  const info=document.createElement('div');
Â  Â  info.className='produto-info';
Â  Â  info.innerHTML=`<strong>${p.titulo}</strong><br><a href="${p.link}" target="_blank">${p.link}</a>`;
Â  Â  item.appendChild(img);
Â  Â  item.appendChild(info);
Â  Â  lista.appendChild(item);
Â  Â  setTimeout(()=>{ item.classList.add('show'); },index*150);
Â  });

Â  box.style.display='block';
}

mostrarProdutos();

document.getElementById('linkAfiliado').addEventListener('blur',function(){
Â  const link=this.value;
Â  let idExtraido = link.match(/MLB\d{9}/i); 
Â  
Â  if(!idExtraido){
Â  Â  idExtraido = link.match(/\d{10}/); 
Â  }
Â  
Â  if(idExtraido){ 
Â  Â  const finalId = idExtraido[0].startsWith('MLB') ? idExtraido[0].toUpperCase() : 'MLB' + idExtraido[0];
Â  Â  document.getElementById('idProduto').value=finalId; 
Â  }
});
</script>
</body>
</html>
